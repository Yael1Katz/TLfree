<!DOCTYPE HTML>
<html>

<head>
    <title>TLfree</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <link href="https://rawgit.com/yael1katz/TLfree/master/css/style.css" rel="stylesheet" type="text/css" media="all" />
    <script type="text/javascript" src="https://rawgit.com/yael1katz/TLfree/master/js/mootools-1.2.4-core.js"></script>
    <script type="text/javascript" src="https://rawgit.com/yael1katz/TLfree/master/js/mootools-1.2.4.2-more.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120811908-1"></script>

    <style>
        .dateclass {
            width: 100%;
        }

        .dateclass.placeholderclass::before {
            width: 100%;
            content: attr(placeholder);
        }

        .dateclass.placeholderclass:hover::before {
            width: 0%;
            content: "";
        }

        .btn-group {
            display: block;
        }

        #searchinput {
            width: 100%;
        }

        #searchclear {
            position: absolute;
            right: 5px;
            top: 0;
            bottom: 0;
            height: 14px;
            margin: auto;
            font-size: 14px;
            cursor: pointer;
            color: #ccc;
        }

        /*input[type=text] {
            width: 130px;
            -webkit-transition: width 0.4s ease-in-out;
            transition: width 0.4s ease-in-out;
        }

        

        input[type=text]:focus {
            width: 70%;
        }*/

        #map {
            height: 90%;
            width: 100%;
        }

        .mapLink {
            float: right;
        }

        i {
            background: #f4f4f4;
            border-radius: 20px;
            font-size: 20px;
            text-align: center;
            /*margin-right: 10px;*/
            border-radius: 50%;
            display: inline-block;
            padding: 5px;
            border: solid gray 1px;
        }

        .star {
            font-size: 25px;
            color: gold;
        }

        span.m_22.favorite {
            margin: 22px 0px 0px 2px;
        }

        .eventGUID {
            display: none;
        }

        /* The Modal (background) */

        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 10px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content */

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 95%;
            height: 95%;
        }

        /* The Close Button */

        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="header-top">
        <div class="wrap">
            <div style="align-items: center; display: flex;justify-content: center">
                <a href="index.html">
                    <img width="280px" height="120px" src="images/tlfree feature graphic.png" alt="" />
                </a>
            </div>
            <!--
            <div class="cssmenu">
                <nav id="nav" role="navigation">
                    <a href="#nav" title="Show navigation">Show navigation</a>
                    <a href="#" title="Hide navigation">Hide navigation</a>
                    <ul class="clearfix">
                        
                        <li class="active">
                            <a href="index.html">Home</a>
                        </li>
                        <li>
                            <a href="start.html">
                                <span>Get Started</span>
                            </a>
                        </li>
                        <li>
                            <a href="work.html">
                                <span>How it Works</span>
                            </a>
                        </li>
                        <li>
                            <a href="pricing.html">Pricing</a>
                        </li>
                        <li>
                            <a href="support.html">Support</a>
                        </li>
                        <div class="clear"></div>
                        
                    </ul>
                </nav>
            </div>
            -->
            <div class="buttons">
                <!--
                <div class="login_btn">
                    <a href="login.html">Login / Signup</a>
                </div>
                -->
                <!--
                <div class="get_btn">
                    <a href="start.html">Get Listed Today</a>
                </div>
                -->
                <div class="clear"></div>
            </div>
            <div class="clear"></div>

            <h2 class="head">Find the
                <span class="m_1">next event </span>You'll want
                <span class="m_1">to attend</span>
            </h2>
        </div>
    </div>
    <!--
    <div class="map">
        <img src="images/map.jpg" alt="" />
    </div>
    -->
    <div class="content-box">
        <div class="wrap">
            <ul class="events">
                <li class="active">
                    <a href="" onclick="eventsTab();return false;">Hot Events</a>
                </li>
                <li>
                    <a href="" onclick="favoritesTab();return false;">Favorites</a>
                </li>
                <li>
                    <a href="" onclick="mapTab();return false;">Map</a>
                </li>
            </ul>
            <div class="content-box-right">
                <div class="form-group row">
                    <div class="col-md-3">
                        <input class="form-control dateclass placeholderclass" id="calendar" placeholder="Select date.." type="date" onchange="filterChanged()"
                            onClick="$(this).removeClass('placeholderclass')">
                    </div>
                    <div class="col-md-9">
                        <div class="btn-group">
                            <input id="searchinput" type="search" placeholder="Search..." class="form-control" onkeyup="filterChanged()">
                            <span id="searchclear" class="glyphicon glyphicon-remove-circle"></span>
                        </div>
                    </div>
                    <div class="col-md-0">

                    </div>
                </div>
            </div>
            <div class="clear"></div>
        </div>
    </div>
    <div class="main">
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <iframe id="googleMapsWindow" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3380.409451336641!2d34.790327385453736!3d32.08521782624389!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b93b59302cb%3A0x5bfa6aa1e6d6a001!2z157XqdeUINep16jXqiA3LCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528795489843"
                    width="100%" height="95%" frameborder="0" style="border:0" allowfullscreen></iframe>
            </div>
        </div>
        <div class="wrap">


        </div>
        <div class="footer">
            <div class="wrap">
                <div class="footer-bottom">
                    <!--
                <div class="copy">
                    <p>Â© 2014 Template by
                        <a href="http://w3layouts.com" target="_blank"> w3layouts</a>
                    </p>
                </div>
                -->
                    <div class="social">
                        <ul>
                            <li>
                                <a href="https://play.google.com/store/apps/details?id=com.omeric.android.tlfree" target="_blank">
                                    <img src="images/googleplay.png" />
                                </a>
                            </li>
                            <li>
                                <a href="https://www.instagram.com/tlfreenow/" target="_blank">
                                    <img src="images/instagram.png" />
                                </a>
                            </li>
                            <!--
                        <li class="facebook">
                            <a href="https://www.facebook.com/TLfree-196181621210411/">
                                <span> </span>
                            </a>
                        </li>
                        <li class="twitter">
                            <a href="#">
                                <span> </span>
                            </a>
                        </li>
                        <li class="linked">
                            <a href="#">
                                <span> </span>
                            </a>
                        </li>
                        <li class="arrow">
                            <a href="#">
                                <span> </span>
                            </a>
                        </li>
                        <li class="dot">
                            <a href="#">
                                <span> </span>
                            </a>
                        </li>
                        <li class="rss">
                            <a href="#">
                                <span> </span>
                            </a>
                        </li>
                        -->
                        </ul>
                    </div>
                    <div class="clear"></div>

                </div>
            </div>
        </div>
        <script>

            /*<div class="section group">
                <div class="col_1_of_3 span_1_of_3">
                    <div class="eventGUID"></div>
                    <img src="https://secure.meetupstatic.com/photos/event/e/9/4/5/highres_471539717.jpeg" alt="">
                    <ul class="m_fb">
                        <li>
                            <span class="m_23">
                                <i>
                                    <img src="images/food.png" width="30" />
                                </i>
                            </span>
                            <span class="m_23">
                                <i>
                                    <img src="images/hq.png" width="30" />
                                </i>
                            </span>
                            <span class="m_22 favorite">
                                <div class="star glyphicon glyphicon-star-empty"></div>
                            </span>
                            <div class="clear"></div>
                        </li>
                    </ul>
                    <div class="desc">
                        <h3>
                            <a href="#">Lorem Ipsum is simply dummy</a>
                        </h3>
                        <h4 class="m_2">consectetur adipisicing elit, sed do</h4>
                        <h5 class="m_3">sed do eiusmod tempor incididunt ut labore</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore
                            et dolore magna aliqua.</p>
                        <a class="mapLink" href="#" onclick="showMap('!1m18!1m12!1m3!1d3380.409451336641!2d34.790327385453736!3d32.08521782624389!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b93b59302cb%3A0x5bfa6aa1e6d6a001!2z157XqdeUINep16jXqiA3LCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528795489843');return false">Show map</a>
                    </div>

                </div>
                <div class="clear"></div>
            </div>*/
            var map;
            var markers = [];
            var wrap = document.getElementsByClassName("wrap")[2];
            var modal = document.getElementById('myModal');
            var span = document.getElementsByClassName("close")[0];
            var allEvents = [];
            var favoritesEventsGUIDs = [];
            var favoritesEvents = [];
            var filteredEvents = [];
            var eventsLocation = {};
            var mapDiv = document.createElement("div");
            mapDiv.setAttribute("id", "map");
            createEventLocationList();
            getAllEvents();
            var selectedTab = "eventsTab";
            function getAllEvents() {

                $.getJSON("https://tlfree-4b9bf.firebaseio.com/db_tlfree.json", function (result) {
                    $.each(result, function (k, v) {
                        var date = Date.parse(v.full_date).toDateString();
                        date = getFormatedDate(date);
                        var currentDate = getFormatedDate(new Date().toDateString());
                        if (new Date(currentDate) - new Date(date) <= 0) {
                            var location = eventsLocation[k] == null ? null : eventsLocation[k].location;
                            var lat = location == null ? null : eventsLocation[k].lat;
                            var lng = location == null ? null : eventsLocation[k].lng;
                            var event = {
                                guid: k, title: v.title, banner_uri: v.banner_uri,
                                date: date, message_text: v.message_text, link_value: v.link_value,
                                labels: v.labels, location: location, lat: lat, lng: lng
                            };
                            allEvents.push(event);
                        }
                    });
                    allEvents.sort(function (a, b) {
                        return new Date(a.date).getTime() - new Date(b.date).getTime();
                    });
                    initFavorites();
                    initFilteredEvents();
                    createEvents(allEvents);
                });

            }
            function getFormatedDate(date) {
                var month = date.toString().split(' ')[1];
                var dayNumber = date.toString().split(' ')[2];
                var year = date.toString().split(' ')[3];
                return dayNumber + "-" + month + "-" + year;
            }
            function filterChanged() {
                filteredEvents = [];
                var searchTerm = document.getElementById("searchinput").value.toUpperCase();
                var selectedDate = document.getElementById("calendar").value;

                if (selectedTab == "favoritesTab") {
                    addEventsToFilteredList(favoritesEvents, selectedDate, searchTerm, filteredEvents);
                }
                else {
                    addEventsToFilteredList(allEvents, selectedDate, searchTerm, filteredEvents);
                }

                if (selectedTab == "mapTab") {
                    removeMarkers();
                    addMarkers();
                    document.getElementById("selectedPinEvent").innerHTML = "";
                }
                else {
                    createEvents(filteredEvents);
                }
            }
            function addEventsToFilteredList(events, selectedDate, searchTerm, filteredEvents) {
                events.forEach(event => {
                    if (event.title.toUpperCase().indexOf(searchTerm) > -1
                        || event.message_text.toUpperCase().indexOf(searchTerm) > -1) {
                        if (selectedDate != "") {
                            selectedDate = new Date(selectedDate).toDateString();
                            selectedDate = getFormatedDate(selectedDate);
                            if (event.date == selectedDate) {
                                filteredEvents.push(event);
                            }
                        }
                        else {
                            filteredEvents.push(event);
                        }
                    }
                });
            }
            function createEvents(events) {
                var itemsCounter = 0;
                wrap.innerHTML = "";
                var sectionGroup;
                events.forEach(event => {
                    if (itemsCounter % 3 == 0) {
                        sectionGroup = document.createElement("div");
                        sectionGroup.setAttribute("calss", "section group");
                        wrap.appendChild(sectionGroup);
                        clear = document.createElement("div");
                        clear.setAttribute("class", "clear");
                        wrap.appendChild(clear);
                    }
                    var eventCard = document.createElement("div");
                    eventCard.setAttribute("class", "col_1_of_3 span_1_of_3");
                    var div = document.createElement("div");
                    div.setAttribute("class", "eventGUID");
                    div.innerHTML = event.guid;
                    eventCard.appendChild(div);
                    var img = document.createElement("img");
                    img.src = event.banner_uri;
                    eventCard.appendChild(img);

                    if (event.labels != 0) {
                        var ul = document.createElement("ul");
                        ul.setAttribute("class", "m_fb");
                        var li = document.createElement("li");

                        var span = document.createElement("span");
                        span.setAttribute("class", "m_23");
                        var i = document.createElement("i");
                        var img = document.createElement("img");
                        img.width = "30";
                        i.appendChild(img);
                        span.appendChild(i);
                        li.appendChild(span);
                        if (event.labels == 1) {
                            img.src = "images/food.png";
                        }
                        else if (event.labels == 2) {
                            img.src = "images/hq.png";
                        }
                        else if (event.labels == 3) {
                            img.src = "images/hq.png";
                            li.appendChild(span);

                            span = document.createElement("span");
                            span.setAttribute("class", "m_23");
                            i = document.createElement("i");
                            img = document.createElement("img");
                            img.src = "images/food.png";
                            img.width = "30";
                            i.appendChild(img);
                            span.appendChild(i);
                            li.appendChild(span);
                        }
                        else if (event.labels == 4) {
                            img.src = "images/ic_90_percent_discount.png";
                        }
                        else if (event.labels == 10) {
                            img.src = "images/hq.png";
                            li.appendChild(span);

                            span = document.createElement("span");
                            span.setAttribute("class", "m_23");
                            i = document.createElement("i");
                            img = document.createElement("img");
                            img.src = "images/ic_editors_choice.png";
                            img.width = "30";
                            i.appendChild(img);
                            span.appendChild(i);
                            li.appendChild(span);
                        }
                        else if (event.labels == 11) {
                            img.src = "images/ic_editors_choice.png";
                        }


                        span = document.createElement("span");
                        span.setAttribute("class", "m_22 favorite");
                        var div = document.createElement("div");
                        if (favoritesEventsGUIDs.indexOf(event.guid) > -1) {
                            div.setAttribute("class", "star glyphicon glyphicon-star");
                        }
                        else {
                            div.setAttribute("class", "star glyphicon glyphicon-star-empty");
                        }
                        span.appendChild(div);
                        li.appendChild(span);
                        ul.appendChild(li);
                        eventCard.appendChild(ul);
                    }

                    /*var ul = document.createElement("ul");
                    ul.setAttribute("class", "m_fb");
                    var li = document.createElement("li");
                    ul.appendChild(li);
                    var span = document.createElement("span");
                    span.setAttribute("class", "m_22");
                    var a = document.createElement("a");
                    img = document.createElement("img");
                    img.src = "images/fb.png";
                    li.appendChild(span);
                    span.appendChild(a);
                    a.appendChild(img);
                    span = document.createElement("span");
                    span.setAttribute("class", "middle");
                    span.innerHTML = v.full_date;
                    li.appendChild(span);
                    span = document.createElement("span");
                    span.setAttribute("class", "m_23");
                    a = document.createElement("a");
                    img = document.createElement("img");
                    img.src = "images/heart.png";
                    li.appendChild(span);
                    span.appendChild(a);
                    a.appendChild(img);
                    eventCard.appendChild(ul);
                    var clear = document.createElement("div");
                    clear.setAttribute("class", "clear");
                    li.appendChild(clear);*/
                    var desc = document.createElement("div");
                    desc.setAttribute("class", "desc");
                    var h3 = document.createElement("h3");
                    a = document.createElement("a");
                    a.href = event.link_value;
                    a.target = "_blank";
                    a.innerHTML = event.title;
                    var p = document.createElement("p");
                    p.innerHTML = event.message_text;
                    h3.appendChild(a);
                    var h4 = document.createElement("h4");
                    h4.setAttribute("class", "m_2");
                    h4.innerHTML = event.date;
                    desc.appendChild(h4);
                    desc.appendChild(h3);
                    desc.appendChild(p);
                    if (event.location != null) {
                        a = document.createElement("a");
                        a.href = "#";
                        a.innerHTML = "Show map";
                        a.setAttribute("class", "mapLink");
                        a.setAttribute("onclick", "showMap('" + event.location + "');return false;");
                        desc.appendChild(a);
                    }
                    eventCard.appendChild(desc);
                    sectionGroup.appendChild(eventCard);
                    itemsCounter++;
                });

                favoriteClicked();


            }
            function favoriteClicked() {
                $(".star.glyphicon").click(function () {
                    var eventGUID = $(this).parent().parent().parent().parent().children()[0].innerHTML;
                    //add to favorite
                    if ($(this)[0].getAttribute("class") == "star glyphicon glyphicon-star-empty") {
                        favoritesEventsGUIDs.push(eventGUID);
                    }
                    //remove from favorites
                    else {
                        var index = favoritesEventsGUIDs.indexOf(eventGUID);
                        if (index > -1) {
                            favoritesEventsGUIDs.splice(index, 1);
                        }
                    }
                    localStorage.setItem("favorites", JSON.stringify(favoritesEventsGUIDs));
                    $(this).toggleClass("glyphicon-star glyphicon-star-empty");

                });
            }
            function initFavorites() {
                var favorites = localStorage.getItem("favorites");
                if (favorites != null) {
                    favorites = JSON.parse(favorites);
                    allEvents.forEach(event => {
                        if (favorites.indexOf(event.guid) > -1) {
                            favoritesEventsGUIDs.push(event.guid);
                        }
                    });
                }
            }
            function initFilteredEvents() {
                allEvents.forEach(event => {
                    filteredEvents.push(event);

                });
            }
            function favoritesTab() {
                selectedTab = "favoritesTab";
                favoritesEvents = [];

                allEvents.forEach(event => {
                    if (favoritesEventsGUIDs.indexOf(event.guid) > -1) {
                        favoritesEvents.push(event);
                    }
                });
                filterChanged();
                createEvents(filteredEvents);
            }
            function eventsTab() {
                selectedTab = "eventsTab";
                filterChanged();
                createEvents(filteredEvents);
            }
            function mapTab() {
                selectedTab = "mapTab";

                wrap.innerHTML = "";
                var raw = document.createElement("div");
                raw.setAttribute("class", "raw");
                var div = document.createElement("div");
                div.setAttribute("class", "col-sm-8");
                div.style.height = "600px";
                raw.appendChild(div);
                div.appendChild(mapDiv);
                div = document.createElement("div");
                div.setAttribute("class", "col-sm-4");
                div.setAttribute("id", "selectedPinEvent");
                raw.appendChild(div);
                div = document.createElement("div");
                div.setAttribute("class", "clear");
                raw.appendChild(div);
                wrap.appendChild(raw);

                //initMap();
                filterChanged();
                //initMap();
                //addMarkers();
            }
            function clearFilters() {
                $("#searchinput").val('');
                document.getElementById("calendar").value = "";
            }
            function showMap(location) {
                var src = "https://www.google.com/maps/embed?pb=" + location;
                var googleMapsWindow = document.getElementById("googleMapsWindow");
                googleMapsWindow.src = src;
                modal.style.display = "block";
            }
            function createEventLocationList() {
                eventsLocation["-LDa0U5oVq-48KAEMdzf"] = { location: "!1m18!1m12!1m3!1d3379.289290325738!2d34.843682685452926!3d32.11548872472807!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d49c093892a3f%3A0x54146c9cc1926e4!2z16jXkNeV15wg15XXnNeg15HXqNeSIDM2LCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528799687037", lat: 32.115484, lng: 34.841494 };
                eventsLocation["-LDa-itPesSJQUaFfkK5"] = { location: "!1m18!1m12!1m3!1d3380.969083740343!2d34.79633328545414!3d32.07008492700109!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9f0fb1749d%3A0x324efdf94c60554b!2z15nXkteQ15wg15DXnNeV158gOTgsINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528799915609", lat: 32.07008, lng: 34.794145 };
                eventsLocation["-LEciqtP5QbrGze63PQ6"] = { location: "!1m18!1m12!1m3!1d3380.9203186518075!2d34.78876458545406!3d32.071403826935075!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9d186b421b%3A0x60e5dde3b18dd62b!2z15DXnNeV16Mg16fXnNee158g157XktefIDMsINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528802118042", lat: 32.0713993, lng: 34.7865759 };
                eventsLocation["-LEOOW31fTlt9XVGQl5c"] = { location: "!1m18!1m12!1m3!1d3380.560805260893!2d34.77591678545382!3d32.08112572644863!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c787e8a4a85%3A0x4843d52a818277bb!2z15PXmdeW15kg16TXqNeZ16nXk9eV158!5e0!3m2!1siw!2sil!4v1528802300558", lat: 32.081121, lng: 34.773728 };
                eventsLocation["-LEONgi_M67Q_kOS62o3"] = { location: "!1m18!1m12!1m3!1d3379.361444308298!2d34.84459878545291!3d32.11353962482573!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d49c04f87fd6b%3A0xacfaecc06fdc0135!2z15PXkdeV16jXlCDXlNeg15HXmdeQ15QgMTIxLCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528802503110", lat: 32.113535, lng: 34.84241 };
                eventsLocation["-LEONronsGashM2ClIM5"] = { location: "!1m18!1m12!1m3!1d3380.847077066869!2d34.77255858545405!3d32.073384626835946!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c809312a84f%3A0xffe89fd7337aad6e!2z15DXmdeT15zXodeV158gMjksINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528895905434", lat: 32.0733846, lng: 34.7725586 };
                eventsLocation["-LEsTmP4lf7yjRixAINf"] = { location: "!1m18!1m12!1m3!1d3381.1710354705956!2d34.776298585454306!3d32.06462242727433!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b7d600773df%3A0xf30f6be72f932829!2z15DXl9eTINeU16LXnSA1NCwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528896049539", lat: 32.0646224, lng: 34.7762986 };
                eventsLocation["-LEsTX5ALg4PumiV4RWK"] = { location: "!1m18!1m12!1m3!1d3380.905402957983!2d34.79121218545413!3d32.071807226915006!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9c46209285%3A0x4aa8c0e33c2116d8!2z15PXqNeaINee16DXl9edINeR15LXmdefIDEyMSwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528896213629", lat: 32.0718072, lng: 34.7912122 };
                eventsLocation["-LEsTFBZ0z8Abi2xkG1C"] = { location: "!1m18!1m12!1m3!1d3381.2497865550527!2d34.771940199999996!3d32.0624921!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c9d19f5c337%3A0x426117a67f038f50!2z16DXl9ec16og15HXoNeZ157XmdefIDU4LCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528902531458", lat: 32.0624921, lng: 34.7719402 };
                eventsLocation["-LEOMW7yLf3YNb-2KdFb"] = { location: "!1m18!1m12!1m3!1d3380.905402957983!2d34.791212185454135!3d32.071807226915006!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9c46209285%3A0x4aa8c0e33c2116d8!2z15PXqNeaINee16DXl9edINeR15LXmdefIDEyMSwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528902727764", lat: 32.0718072, lng: 34.7912122 };
                eventsLocation["-LEOMhRCmP9nVkKjqHWq"] = { location: "!1m18!1m12!1m3!1d3381.238833613493!2d34.771473799999995!3d32.0627884!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c9d218738b3%3A0x779241024c11d83d!2z16nXk9eo15XXqiDXqNeV15jXqdeZ15zXkyAyMiwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528903699365", lat: 32.0627884, lng: 34.7714738 };
                eventsLocation["-LEsR5KpfccqHeBURHD4"] = { location: "!1m18!1m12!1m3!1d3381.1710354705956!2d34.776298585454306!3d32.06462242727433!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b7d600773df%3A0xf30f6be72f932829!2z15DXl9eTINeU16LXnSA1NCwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528904232738", lat: 32.0646224, lng: 34.7762986 };
                eventsLocation["-LEJI6IF8ZzPEXjQ-B3y"] = { location: "!1m18!1m12!1m3!1d8516.44115388503!2d34.823466683008796!3d32.1029907016896!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d497896e56885%3A0x15937ed33d2ea3c4!2sRudy+Project!5e0!3m2!1siw!2sil!4v1528904559858", lat: 32.1029907, lng: 34.8234667 };
                eventsLocation["-LEsSlsEiP7Qxs2Forby"] = { location: "!1m18!1m12!1m3!1d3380.263257164488!2d34.77308608483529!3d32.08916998118507!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c768299324d%3A0xd54dd0137261b603!2z15TXmdec15jXldefINeq15wg15DXkdeZ15E!5e0!3m2!1siw!2sil!4v1528904812718", lat: 32.08917, lng: 34.7730861 };
                eventsLocation["-LEJIoIALxdOEIIgZJjo"] = { location: "!1m18!1m12!1m3!1d3379.2833791127887!2d34.84303500000001!3d32.1156484!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d49eafad40483%3A0xa5522fb9f89be5f7!2sKiryat+Atidim+8!5e0!3m2!1siw!2sil!4v1528957313830", lat: 32.1156484, lng: 34.843035 };
                eventsLocation["-LEJIV163Yp1x3w2Y18B"] = { location: "!1m18!1m12!1m3!1d3381.2084721883766!2d34.76530568545434!3d32.063609727325016!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c9a7a7f71a9%3A0xa2d2566dbfad63cf!2z15TXnteo15MgMjksINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528957917920", lat: 32.0636097, lng: 34.7653057 };
                eventsLocation["-LDvzBZdckhp3QsZBEWo"] = { location: "!1m18!1m12!1m3!1d3380.2573735993365!2d34.77295958545358!3d32.08932902603807!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c76f625f4d3%3A0xa41781df55329271!2z15TXmdeo16fXldefIDIwNSwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528958153929", lat: 32.089329, lng: 34.7729596 };
                eventsLocation["-LEsSaPmB0-uZoAW1Jzr"] = { location: "!1m18!1m12!1m3!1d3380.99794954512!2d34.7831105!3d32.0693042!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b78681b847d%3A0x551653d69ecc489d!2z16fXldee15QgMSwg16fXqNec15nXkdeaIDEwLCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528958255314", lat: 32.0693042, lng: 34.7831105 };
                eventsLocation["-LEsSNG9kiXDy6m_JbZ_"] = { location: "!1m18!1m12!1m3!1d3381.171225014415!2d34.7726696!3d32.0646173!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c82c77bdbdf%3A0x42225aec19d5d616!2z15DXnNeg15HXmSA5OSwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528958420151", lat: 32.0646173, lng: 34.7726696 };
                eventsLocation["-LEJHlGcTJPCaWhc9vJ_"] = { location: "!1m18!1m12!1m3!1d3380.9692511188787!2d34.79414459999999!3d32.0700804!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9f0fb1749d%3A0x324efdf94c60554b!2z15nXkteQ15wg15DXnNeV158gOTgsINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528958580653", lat: 32.0700804, lng: 34.7941446 };
                eventsLocation["-LEJHVZtAFSFhPmbZPt9"] = { location: "!1m18!1m12!1m3!1d3380.905402957983!2d34.79121218545413!3d32.071807226915006!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9c46209285%3A0x4aa8c0e33c2116d8!2z15PXqNeaINee16DXl9edINeR15LXmdefIDEyMSwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528958847920", lat: 32.0718072, lng: 34.7912122 };
                eventsLocation["-LEOMIQhcvLfBa4IbXSb"] = { location: "!1m18!1m12!1m3!1d3380.9690837403427!2d34.79633328545415!3d32.0700849270011!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9f0fb1749d%3A0x324efdf94c60554b!2z15nXkteQ15wg15DXnNeV158gOTgsINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528959081548", lat: 32.0700849, lng: 34.7963333 };
                eventsLocation["-LDgrdoklAPlLk7-8EJF"] = { location: "!1m18!1m12!1m3!1d3380.5608052608923!2d34.775916785453816!3d32.08112572644865!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c787e8a4a85%3A0x4843d52a818277bb!2z15PXmdeW15kg16TXqNeZ16nXk9eV158!5e0!3m2!1siw!2sil!4v1528959274725", lat: 32.0811257, lng: 34.7759168 };
                eventsLocation["-LEsS7Me8hdsL5gKBUGt"] = { location: "!1m18!1m12!1m3!1d3381.161088418096!2d34.7744453!3d32.06489150000001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b7d63e033d9%3A0xa3eec40497654c9b!2z15DXl9eTINeU16LXnSAzNSwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528959372646", lat: 32.0648915, lng: 34.7744453 };
                eventsLocation["-LEEUVJ8pcTdaeKPBc6C"] = { location: "!1m18!1m12!1m3!1d3381.215825857575!2d34.7715568!3d32.0634108!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c9d268dd2a3%3A0x35d8ee3957a8f0e2!2z16DXl9ec16og15HXoNeZ157XmdefIDUyLCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528959525521", lat: 32.0634108, lng: 34.7715568 };
                eventsLocation["-LEEUh3mCVH2kP0MFjLZ"] = { location: "!1m18!1m12!1m3!1d3380.9692511188787!2d34.79414459999999!3d32.0700804!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9f0fb1749d%3A0x324efdf94c60554b!2z15nXkteQ15wg15DXnNeV158gOTgsINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528959791853", lat: 32.0700804, lng: 34.7941446 };
                eventsLocation["-LEEUBTJ8HMxdvQbaL37"] = { location: "!1m18!1m12!1m3!1d13522.15128006356!2d34.78958243022463!3d32.081747199999995!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b8f5c46983b%3A0xa3ac2e6c7d76192b!2z16LXmdeo15nXmdeqINeq15wg15DXkdeZ15E!5e0!3m2!1siw!2sil!4v1528959905925", lat: 32.0817472, lng: 34.7895824 };
                eventsLocation["-LEOLv-IYEcj_ZPd-eXv"] = { location: "!1m18!1m12!1m3!1d1690.4527432379296!2d34.790117842034654!3d32.071804968158425!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9c46209285%3A0x4aa8c0e33c2116d8!2z15PXqNeaINee16DXl9edINeR15LXmdefIDEyMSwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528960154688", lat: 32.071805, lng: 34.7901178 };
                eventsLocation["-LDgr95siCN-QPwJqBE-"] = { location: "!1m18!1m12!1m3!1d3380.99794954512!2d34.7831105!3d32.0693042!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b78681b847d%3A0x551653d69ecc489d!2z16fXldee15QgMSwg16fXqNec15nXkdeaIDEwLCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528960309204", lat: 32.0693042, lng: 34.7831105 };
                eventsLocation["-LEOLSUmNS9WZPtO_XyO"] = { location: "!1m18!1m12!1m3!1d3381.2041433792947!2d34.77180878545436!3d32.06372682731916!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c9cbe9b3d65%3A0xde756930cfc2928c!2z15DXl9eTINeU16LXnSA5LCDXqtecINeQ15HXmdeRINeZ16TXlQ!5e0!3m2!1siw!2sil!4v1528960412812", lat: 32.0637268, lng: 34.7718088 };
                eventsLocation["-LEcnBN1ZFNRp8KcHTSw"] = { location: "!1m18!1m12!1m3!1d3380.7247263585614!2d34.78848228545402!3d32.076693326670416!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9b23d76785%3A0xd3798bcb8af3916a!2z16HXpNeo15nXmdeqINeR15nXqiDXkNeo15nXkNec15Q!5e0!3m2!1siw!2sil!4v1528960507937", lat: 32.0766933, lng: 34.7884823 };
                eventsLocation["-LDVrriGwuIOEvdLeyeL"] = { location: "!1m18!1m12!1m3!1d3379.6281738897237!2d34.815485585453125!3d32.10633352518666!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d49795199f8ff%3A0x6eeea39d399fa8d9!2z16nXk9eo15XXqiDXqNeV16fXlyAxMDEsINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528961900886", lat: 32.1063335, lng: 34.8154856 };
                eventsLocation["-LEsRs6yi2CyZvUkWpAD"] = { location: "!1m18!1m12!1m3!1d3381.132362938079!2d34.77043168545423!3d32.065668527222!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c84a928339f%3A0x23883f5251263602!2sLe+Wagon+TLV!5e0!3m2!1siw!2sil!4v1528962284356", lat: 32.0656685, lng: 34.7704317 };
                eventsLocation["-LEcmoYQkK61JF2GlWZH"] = { location: "!1m18!1m12!1m3!1d3381.208472188377!2d34.76530568545432!3d32.063609727325!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c9a7a7f71a9%3A0xa2d2566dbfad63cf!2z15TXnteo15MgMjksINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528962464581", lat: 32.0636097, lng: 34.7653057 };
                eventsLocation["-LEETvIW5QjYSfPCa4pS"] = { location: "!1m18!1m12!1m3!1d3381.178976120703!2d34.77252018545434!3d32.064407627285064!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4c9ccc88f17b%3A0xb11d04fac137009!2z15DXl9eV15bXqiDXkdeZ16ogMiwg16rXnCDXkNeR15nXkSDXmdek15U!5e0!3m2!1siw!2sil!4v1528962633980", lat: 32.0644076, lng: 34.7725202 };
                eventsLocation["-LEsRJ7_0UjGtktcCFcd"] = { location: "!1m18!1m12!1m3!1d3380.770129856173!2d34.810984485454014!3d32.07546552673189!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4bb0f250df87%3A0x461cae299c1d160f!2z15vXpteg15zXodeV158gNjcsINeS15HXoteq15nXmded!5e0!3m2!1siw!2sil!4v1528962740917", lat: 32.0754655, lng: 34.8109845 };
                eventsLocation["-LDBIF7XlYztfucX91rP"] = { location: "!1m18!1m12!1m3!1d3379.3696252887576!2d34.806576385453006!3d32.11331862483683!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4965df760bfb%3A0x59bd1a3ce25e6def!2z15DXldeg15nXkdeo16HXmdeY16og16rXnC3XkNeR15nXkQ!5e0!3m2!1siw!2sil!4v1528962886468", lat: 32.1133186, lng: 34.8065764 };
                eventsLocation["-LDgqqUuwtUiKbpAxHjS"] = { location: "!1m18!1m12!1m3!1d3381.2998618436395!2d34.78441578545436!3d32.06113742744866!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b7b2a7e8771%3A0xbdb07fc508bd8590!2z16nXkdeiIC0g157Xp9eV150g15zXkNeZ16jXldei15nXnQ!5e0!3m2!1siw!2sil!4v1528962995719", lat: 32.0611374, lng: 34.7844158 };
                eventsLocation["-LEETV6apJlj1yUJ-bEm"] = { location: "!1m18!1m12!1m3!1d3381.0280253963006!2d34.796334085454134!3d32.06849072708075!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151d4b9fb4ea3da1%3A0x7e3584c5bedd565d!2z15nXkteQ15wg15DXnNeV158gOTQsINeq15wg15DXkdeZ15Eg15nXpNeV!5e0!3m2!1siw!2sil!4v1528963123248", lat: 32.0684907, lng: 34.7963341 };


                //eventsLocation[""] = { location: "", lat: , lng: };
            }
            span.onclick = function () {
                modal.style.display = "none";
            }
            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }

            function initMap() {
                map = new google.maps.Map(mapDiv, {
                    center: { lat: 32.069396, lng: 34.7869129 },
                    zoom: 13.5
                });
            }

            function addMarkers() {
                //markers = [];
                filteredEvents.forEach(event => {
                    if (event.location != null) {
                        var marker = new google.maps.Marker({
                            position: { lat: event.lat, lng: event.lng },
                            map: map,
                            title: event.title,
                            icon: 'images/pin.png',
                            animation: google.maps.Animation.DROP,
                            draggable: false,
                            event: event
                        });
                        google.maps.event.addListener(marker, 'click', function () {
                            var event = marker.event;

                            var sectionGroup = document.createElement("div");
                            sectionGroup.setAttribute("calss", "section group");

                            var eventCard = document.createElement("div");
                            eventCard.setAttribute("class", "col_1_of_3");
                            var div = document.createElement("div");
                            div.setAttribute("class", "eventGUID");
                            div.innerHTML = event.guid;
                            eventCard.appendChild(div);
                            var img = document.createElement("img");
                            img.src = event.banner_uri;
                            eventCard.appendChild(img);

                            if (event.labels != 0) {
                                var ul = document.createElement("ul");
                                ul.setAttribute("class", "m_fb");
                                var li = document.createElement("li");

                                var span = document.createElement("span");
                                span.setAttribute("class", "m_23");
                                var i = document.createElement("i");
                                var img = document.createElement("img");
                                img.width = "30";
                                i.appendChild(img);
                                span.appendChild(i);
                                li.appendChild(span);
                                if (event.labels == 1) {
                                    img.src = "images/food.png";
                                }
                                else if (event.labels == 2) {
                                    img.src = "images/hq.png";
                                }
                                else if (event.labels == 3) {
                                    img.src = "images/hq.png";
                                    li.appendChild(span);

                                    span = document.createElement("span");
                                    span.setAttribute("class", "m_23");
                                    i = document.createElement("i");
                                    img = document.createElement("img");
                                    img.src = "images/food.png";
                                    img.width = "30";
                                    i.appendChild(img);
                                    span.appendChild(i);
                                    li.appendChild(span);
                                }
                                else if (event.labels == 4) {
                                    img.src = "images/ic_90_percent_discount.png";
                                }
                                else if (event.labels == 10) {
                                    img.src = "images/hq.png";
                                    li.appendChild(span);

                                    span = document.createElement("span");
                                    span.setAttribute("class", "m_23");
                                    i = document.createElement("i");
                                    img = document.createElement("img");
                                    img.src = "images/ic_editors_choice.png";
                                    img.width = "30";
                                    i.appendChild(img);
                                    span.appendChild(i);
                                    li.appendChild(span);
                                }
                                else if (event.labels == 11) {
                                    img.src = "images/ic_editors_choice.png";
                                }


                                span = document.createElement("span");
                                span.setAttribute("class", "m_22 favorite");
                                var div = document.createElement("div");
                                if (favoritesEventsGUIDs.indexOf(event.guid) > -1) {
                                    div.setAttribute("class", "star glyphicon glyphicon-star");
                                }
                                else {
                                    div.setAttribute("class", "star glyphicon glyphicon-star-empty");
                                }
                                span.appendChild(div);
                                li.appendChild(span);
                                ul.appendChild(li);
                                eventCard.appendChild(ul);
                            }
                            var desc = document.createElement("div");
                            desc.setAttribute("class", "desc");
                            var h3 = document.createElement("h3");
                            a = document.createElement("a");
                            a.href = event.link_value;
                            a.target = "_blank";
                            a.innerHTML = event.title;
                            var p = document.createElement("p");
                            p.innerHTML = event.message_text;
                            h3.appendChild(a);
                            var h4 = document.createElement("h4");
                            h4.setAttribute("class", "m_2");
                            h4.innerHTML = event.date;
                            desc.appendChild(h4);
                            desc.appendChild(h3);
                            desc.appendChild(p);
                            if (event.location != null) {
                                a = document.createElement("a");
                                a.href = "#";
                                a.innerHTML = "Show map";
                                a.setAttribute("class", "mapLink");
                                a.setAttribute("onclick", "showMap('" + event.location + "');return false;");
                                desc.appendChild(a);
                            }
                            eventCard.appendChild(desc);
                            sectionGroup.appendChild(eventCard);

                            var div = document.getElementById("selectedPinEvent");
                            div.innerHTML = "";
                            div.appendChild(sectionGroup);
                            favoriteClicked();
                        });
                        markers.push(marker);
                    }
                });
            }
            function removeMarkers() {
                //Loop through all the markers and remove
                for (var i = 0; i < markers.length; i++) {
                    markers[i].setMap(null);
                }
                markers = [];
            };
            $(function () {
                $('li').click(function () {
                    $('li.active').removeClass('active');
                    $(this).addClass('active');
                });
            });
            $("#searchclear").click(function () {
                $("#searchinput").val('');
                filterChanged();
            });
            //Google analytics
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'UA-120811908-1');
        </script>


        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDdZD0Rsf1mCKYSh1Xu9I1d3uNIZM2hNEo&callback=initMap"
            type="text/javascript"></script>
</body>

</html>