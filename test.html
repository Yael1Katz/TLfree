<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>test</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- Firebase App is always required and must be first -->
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-app.js"></script>

    <!-- Add additional services that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-database.js"></script>
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
    <link href="css/style.more.css" rel="stylesheet" type="text/css" />





    <style>
    </style>
</head>

<body>
    <div class="col_1_of_4 span_1_of_4">
        <a href="https://www.instagram.com/p/BlqbglJHvWX/" target="_blank">
            <!--<img src="https://scontent.cdninstagram.com/vp/9164550db8beaa6fc3ff94bdc90f5f1a/5C0A2535/t51.2885-15/e35/s320x320/37585870_248095559338066_2932258581971468288_n.jpg">-->

            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner">
                    <div class="item active">
                        <img src="https://scontent.cdninstagram.com/vp/9164550db8beaa6fc3ff94bdc90f5f1a/5C0A2535/t51.2885-15/e35/s320x320/37585870_248095559338066_2932258581971468288_n.jpg"
                            alt="Los Angeles">
                    </div>

                    <div class="item">
                        <img src="https://scontent.cdninstagram.com/vp/9164550db8beaa6fc3ff94bdc90f5f1a/5C0A2535/t51.2885-15/e35/s320x320/37585870_248095559338066_2932258581971468288_n.jpg"
                            alt="Chicago">
                    </div>

                    <div class="item">
                        <img src="https://scontent.cdninstagram.com/vp/9164550db8beaa6fc3ff94bdc90f5f1a/5C0A2535/t51.2885-15/e35/s320x320/37585870_248095559338066_2932258581971468288_n.jpg"
                            alt="New York">
                    </div>
                </div>

                <!-- Left and right controls -->
                <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#myCarousel" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </a>
        <div class="desc">
            <h4 class="m_2">25-Jul-2018</h4>
            <p style="word-wrap: break-word;">Startup Grind summer party More FREE events with TLfree app here: http://bit.ly/2M43eQm_TLfree www.tlfreeonline.com
            </p>
        </div>
        <div class="hr"></div>
        <div class="section group center" style="padding: 0% 0% 2% 3%;">
            <label class="btn myBtn popup" style="margin-right: 10px" title="Share" onclick="openSharePopup(this.children[1])">
                <img src="images/share.png" class="img-thumbnail" style="border:0;opacity: 0.5;">
                <span class="popuptext">
                    <a href="https://twitter.com/intent/tweet?text=https://www.instagram.com/p/BlqbglJHvWX/" target="_blank" class="fa fa-twitter"></a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.instagram.com/p/BlqbglJHvWX/" target="_blank" class="fa fa-facebook"></a>
                    <a href="https://api.whatsapp.com/send?text=https://www.instagram.com/p/BlqbglJHvWX/" target="_blank" class="fa fa-whatsapp"></a>
                </span>
            </label>
            <label class="btn myBtn" style="margin-right: 10px" onclick="showMap('LIGHT - לייט')" title="LIGHT - לייט" data-toggle="modal"
                data-target="#mapModal">
                <img src="images/map.png" class="img-thumbnail" style="border:0;opacity: 0.5;">
            </label>
        </div>
    </div>
    <div class="clear"></div>



    <script>
        var wrap = document.getElementsByTagName("body")[0];
        createPhotos();
        function createPhotos() {
            var token = '7827332378.967b255.d814bd12122c47e1b4455ba6bf20810e'; // learn how to obtain it below
            var userid = 7827332378; // User ID - get it in source HTML of your Instagram profile or look at the next example :)
            var num_photos = 20; // how much photos do you want to get
            wrap.innerHTML = "";
            $.ajax({
                url: 'https://api.instagram.com/v1/users/' + userid + '/media/recent', // or /users/self/media/recent for Sandbox
                dataType: 'jsonp',
                type: 'GET',
                data: { access_token: token, count: num_photos },
                success: function (data) {
                    var itemsCounter = 0;
                    var sectionGroup;
                    data.data.forEach(item => {
                        if (itemsCounter % 4 == 0) {
                            sectionGroup = document.createElement("div");
                            sectionGroup.setAttribute("calss", "section group");
                            wrap.appendChild(sectionGroup);
                            clear = document.createElement("div");
                            clear.setAttribute("class", "clear");
                            wrap.appendChild(clear);
                        }
                        var eventCard = document.createElement("div");
                        eventCard.setAttribute("class", "col_1_of_4 span_1_of_4");
                        var a = document.createElement("a");
                        a.href = item.link;
                        a.target = "_blank";

                        eventCard.appendChild(a);
                        if (item.carousel_media === undefined) {
                            var img = document.createElement("img");
                            img.src = item.images.low_resolution.url;
                            a.appendChild(img);
                        }
                        else {
                            debugger;
                            var carousel = document.createElement("div");
                            carousel.setAttribute("id", "myCarousel_" + item.id);
                            carousel.setAttribute("class", "carousel slide");
                            carousel.setAttribute("data-ride", "carousel");

                            var ol = document.createElement("ol");
                            ol.setAttribute("class", "carousel-indicators");
                            var carouselInner = document.createElement("div");
                            carouselInner.setAttribute("class", "carousel-inner");
                            var couner = 0;

                            item.carousel_media.forEach(image => {
                                if (image.images !== undefined) {
                                    var li = document.createElement("li");
                                    li.setAttribute("data-target", "#myCarousel_" + item.id);
                                    li.setAttribute("data-slide-to",  couner);
                                    var item1 = document.createElement("div");
                                    var img = document.createElement("img");
                                    img.setAttribute("src", image.images.low_resolution.url);
                                    item1.appendChild(img);
                                    if (couner == 0) {
                                        item1.setAttribute("class", "item active");
                                        li.setAttribute("class", "active");
                                    }
                                    else {
                                        item1.setAttribute("class", "item");
                                    }
                                    ol.appendChild(li);
                                    carouselInner.appendChild(item1);
                                }

                                couner++;
                            });

                            var leftCarouselControl = document.createElement("a");
                            leftCarouselControl.setAttribute("class", "left carousel-control");
                            leftCarouselControl.setAttribute("href", "#myCarousel_" + item.id);
                            leftCarouselControl.setAttribute("data-slide", "prev");
                            var span = document.createElement("span");
                            span.setAttribute("class", "glyphicon glyphicon-chevron-left");
                            leftCarouselControl.appendChild(span);
                            span = document.createElement("span");
                            span.setAttribute("class", "sr-only");
                            span.innerHTML = "Previous";
                            leftCarouselControl.appendChild(span);
                            var rightCarouselControl = document.createElement("a");
                            rightCarouselControl.setAttribute("class", "right carousel-control");
                            rightCarouselControl.setAttribute("href", "#myCarousel_" + item.id);
                            rightCarouselControl.setAttribute("data-slide", "next");
                            var span = document.createElement("span");
                            span.setAttribute("class", "glyphicon glyphicon-chevron-right");
                            rightCarouselControl.appendChild(span);
                            span = document.createElement("span");
                            span.setAttribute("class", "sr-only");
                            span.innerHTML = "Next";
                            rightCarouselControl.appendChild(span);

                            a = document.createElement("a");
                            a.href = item.link;
                            a.target = "_blank";
                            a.appendChild(ol);
                            a.appendChild(carouselInner);
                            
                            carousel.appendChild(a);
                            carousel.appendChild(leftCarouselControl);
                            carousel.appendChild(rightCarouselControl);
                            eventCard.appendChild(carousel);
                        }




                        var desc = document.createElement("div");
                        desc.setAttribute("class", "desc");
                        var h4 = document.createElement("h4");
                        h4.setAttribute("class", "m_2");
                        h4.innerHTML = convertFromTimestmapToDate(item.created_time);
                        var p = document.createElement("p");
                        p.setAttribute("style", "word-wrap: break-word;");
                        p.innerHTML = item.caption.text;
                        desc.appendChild(h4);
                        desc.appendChild(p);
                        eventCard.appendChild(desc);

                        var hr = document.createElement("div");
                        hr.setAttribute("class", "hr");
                        eventCard.appendChild(hr);

                        var div = document.createElement("div");
                        div.setAttribute("class", "section group center");
                        div.setAttribute("style", "padding: 0% 0% 2% 3%;");
                        var label = document.createElement("label");
                        label.setAttribute("class", "btn myBtn popup");
                        label.setAttribute("style", "margin-right: 10px");
                        label.setAttribute("title", "Share");
                        label.setAttribute("onclick", "openSharePopup(this.children[1])");
                        var img = document.createElement("img");
                        img.src = "images/share.png";
                        img.setAttribute("class", "img-thumbnail");
                        img.setAttribute("style", "border:0;opacity: 0.5;");
                        var span = document.createElement("span");
                        span.setAttribute("class", "popuptext");
                        a = document.createElement("a");
                        a.href = "https://twitter.com/intent/tweet?text=" + item.link;
                        a.target = "_blank";
                        a.setAttribute("class", "fa fa-twitter");
                        span.appendChild(a);
                        a = document.createElement("a");
                        a.href = "https://www.facebook.com/sharer/sharer.php?u=" + item.link;
                        a.target = "_blank";
                        a.setAttribute("class", "fa fa-facebook");
                        span.appendChild(a);
                        a = document.createElement("a");
                        a.href = "https://api.whatsapp.com/send?text=" + item.link;
                        a.target = "_blank";
                        a.setAttribute("class", "fa fa-whatsapp");
                        span.appendChild(a);
                        label.appendChild(img);
                        label.appendChild(span);
                        div.appendChild(label);
                        label = document.createElement("label");
                        label.setAttribute("class", "btn myBtn");
                        label.setAttribute("style", "margin-right: 10px");
                        label.setAttribute("onclick", "showMap('" + item.location.name + "')");
                        label.setAttribute("title", item.location.name);
                        label.setAttribute("data-toggle", "modal");
                        label.setAttribute("data-target", "#mapModal");

                        /*<div id="myCarousel" class="carousel slide" data-ride="carousel">
                            <!-- Indicators -->
                            <ol class="carousel-indicators">
                                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                                <li data-target="#myCarousel" data-slide-to="1"></li>
                                <li data-target="#myCarousel" data-slide-to="2"></li>
                            </ol>

                            <!-- Wrapper for slides -->
                            <div class="carousel-inner">
                                <div class="item active">
                                    <img src="https://scontent.cdninstagram.com/vp/9164550db8beaa6fc3ff94bdc90f5f1a/5C0A2535/t51.2885-15/e35/s320x320/37585870_248095559338066_2932258581971468288_n.jpg"
                                        alt="Los Angeles">
                                </div>

                                <div class="item">
                                    <img src="https://scontent.cdninstagram.com/vp/9164550db8beaa6fc3ff94bdc90f5f1a/5C0A2535/t51.2885-15/e35/s320x320/37585870_248095559338066_2932258581971468288_n.jpg"
                                        alt="Chicago">
                                </div>

                                <div class="item">
                                    <img src="https://scontent.cdninstagram.com/vp/9164550db8beaa6fc3ff94bdc90f5f1a/5C0A2535/t51.2885-15/e35/s320x320/37585870_248095559338066_2932258581971468288_n.jpg"
                                        alt="New York">
                                </div>
                            </div>

                            <!-- Left and right controls -->
                            <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="right carousel-control" href="#myCarousel" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>*/
                        img = document.createElement("img");
                        img.src = "images/map.png";
                        img.setAttribute("class", "img-thumbnail");
                        img.setAttribute("style", "border:0;opacity: 0.5;");
                        label.appendChild(img);
                        div.appendChild(label);
                        eventCard.appendChild(div);

                        sectionGroup.appendChild(eventCard);
                        itemsCounter++;
                    });
                },
                error: function (data) {
                    console.log(data); // send the error notifications to console
                }
            });
        }
        function convertFromTimestmapToDate(UNIX_timestamp) {
            var a = new Date(UNIX_timestamp * 1000);
            var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            var year = a.getFullYear();
            var month = months[a.getMonth()];
            var date = a.getDate();
            var time = date + ' ' + month + ' ' + year;
            return time;
        }
    </script>
</body>

</html>